using sysbus
mach create "Processing Module"

machine LoadPlatformDescriptionFromString """
using "platforms/cpus/polarfire-soc.repl"

envmData:
    size: 0x40000
"""

showAnalyzer mmuart0
showAnalyzer mmuart1

machine SdCardFromFile `fetch_file "polarfire/emmc.img"` mmc 0x100000000

macro reset
"""
    sysbus LoadELF `fetch_file "polarfire/hss.elf"`
    sysbus LoadBinary `fetch_file "polarfire/fitImage.fit"` 0x88300000
"""
runMacro $reset
